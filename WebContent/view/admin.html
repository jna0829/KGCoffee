
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>


<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 페이지</title>
    <style>


        *{
           
            font-size: 16px;
            box-sizing: border-box;


        }

        body{
            width: 100%;
            height: 800px;
        }

        .wrap{
            
            width: 100%;
            height: 100%;
            display: flex;
            
            
        }

        .wrap section{
            
            display: block;
        }


        .nav_section{
            
            width: 20%;
            height: 100%;
            background: yellow;

        }
        .content_section{
            
            width: 80%;
            height: 100%;
            background: lightgray;
            padding: 40px;

        }

        .nav_wrap{


        }

        .nav *{

            list-style: none;

        }
        .nav_menu{


        }

        .nav_menu .nav_list{


        }

        .nav_list a{

            text-decoration: none;

        }
        .content_hedear_wrap{
            display: block;
            width: 100%;
            height: 20%;
            background: tomato;
        }
        
        .content_wrap{

            display: block;
            width: 100%;
            height: 80%;
            

        }
        .content{
            width: 100%;
            height: 100%;
            background: green;
            z-index: 500;
        }


    </style>
</head>
<body>
    
    <div class="wrap">

        <section class="nav_section">
            <div class="nav_wrap">
                <div class="nav">

                    <ul class="nav_menu">

                        <li class="nav_list">
                            <a href=""></a>
                        </li>
                        <li class="nav_list">
                            <a href=""></a>
                        </li>
                        <li class="nav_list">
                            <a href=""></a>
                        </li>

                    </ul>

                </div>
            </div>
        </section>

        <section class="content_section">

            <div class="content_hedear_wrap">
                <div class="content_header"></div>
            </div>

            <div class="content_wrap">
                <div class="content">


                </div>
            </div>
        </section>
    </div>
</body>
</html>




가장잘팔리는메뉴
payments count(menuId) 


가장주문이많은매장
order_table group by map_id




나이대별로 가장인기있는 메뉴
select r.*, m.* from
(select age, menu_id, sum(menu_amount) 수량,(row_number() over (partition by age order by sum(menu_amount) desc)) rank 
    from(
        select A.age, B.menu_id, B.menu_amount from (select o.*, floor((to_char(sysdate, 'YYYY') - extract(year from u.birthday))/10) * 10 as age 
            from order_table o inner join users u on o.user_id = u.user_id)A inner join payments_table B on A.order_id = B.order_id) C
group by age,menu_id order by age, rank) R, menu m where rank <= 3 and R.menu_id = m.menuId;
							        등수

매장별 일 월 년 총 주문량
select A.*, B.place_name from
    (select count(*) 주문량, map_id, 날짜 from 
             (select map_id, TO_CHAR(order_date, 'YYYY') as 날짜 from order_table) where 날짜='2023' group by 날짜,map_id  order by 주문량 desc) A
    inner join map_table B on A.map_id=B.map_id;

select A.*, B.place_name from
    (select count(*) 주문량, map_id, 날짜 from 
             (select map_id, TO_CHAR(order_date, 'YYYYMM') as 날짜 from order_table) where 날짜='202306' group by 날짜,map_id  order by 주문량 desc) A
    inner join map_table B on A.map_id=B.map_id;

select A.*, B.place_name from
    (select count(*) 주문량, map_id, 날짜 from 
             (select map_id, TO_CHAR(order_date, 'YYYYMMDD') as 날짜 from order_table) where 날짜='20230627' group by 날짜,map_id  order by 주문량 desc) A
    inner join map_table B on A.map_id=B.map_id;


